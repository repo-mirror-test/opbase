# build参数说明

## 简介
build.sh是本项目的构建脚本，默认在项目根目录下，作用是将源代码自动编译、链接和配置，最终生成可执行文件、库文件或其它可供安装或直接运行的目标文件。具体来说，脚本中通过配置不同参数实现多种功能，包含编译opbase包、执行单元测试等。


## 使用方法 
1. **配置环境变量**
   
   参考[快速入门 > 环境准备](./quick_start.md#环境准备)完成环境变量配置。
   ```bash
   # 默认路径安装，以root用户为例
   source /usr/local/Ascend/cann/set_env.sh
   ```
2. **构建命令格式**

   以编译opbase包命令为例，样式如下
   ```bash
   bash build.sh
   ```
   全量参数含义参见[参数说明](#参数说明)，请按实际情况选择合适的参数。

## 参数说明
build.sh支持多种功能，可通过如下命令查看所有功能参数。
```bash
bash build.sh --help
```

详细参数介绍见下表：


| 参数名                 | 可选/必选 | 参数说明                                                       |
|---------------------|-------|------------------------------------------------------------|
| -j${n}              | 可选    | 指定编译线程数，${n}为具体线程数，默认值为8（如：-j8）；若线程数超过CPU核心数，会自动调整为CPU核心数。 |
| --verbose,-v        | 可选    | 查看CMake编译配置信息。                                             |
| -O${n}              | 可选    | 指定编译优化级别，支持O0/O1/O2/O3（如：-O3），${n}为优化级别标识。                 |
| -u                  | 可选    | 启用单元测试（UT）编译模式，编译所有UT目标。                                   |
| -s                  | 可选    | 启用系统测试（ST）编译模式，编译所有ST目标。                                   |
| --help,-h           | 可选    | 打印脚本使用帮助信息。                                                |
| --build-type        | 可选    | 启用调试模式。可选类型：Release/Debug，默认为Release。                                                    |
| --cov               | 可选    | 预留参数，开发者暂不需要关注。                                            |
| --noexec            | 可选    | 仅编译单元测试二进制文件，不自动执行编译后的UT可执行文件。                             |
| --make_clean    | 可选    | 执行完全清理操作（删除所有编译相关文件），执行后脚本退出。                              |
| --cann_3rd_lib_path | 可选    | 设置提升第三方包安装路径，默认值为：./third_party。                            |
| --pkg               | 可选    | 生成安装包。                           |
| --asan              | 可选    | 开启host侧ASAN（AddressSanitizer）内存检测功能。                            |